# Create nuget.config for resolving dependencies exclusively from SDK_Dotnet_V4_org feed.
steps:
- powershell: |
    $file = "$(Build.SourcesDirectory)\nuget.config";

    $content = @"
    <?xml version="1.0" encoding="utf-8"?>
    <configuration>
      <packageSources>
        <clear />
        <add key="SDK_Dotnet_V4_org" value="https://pkgs.dev.azure.com/FuseLabs/_packaging/SDK_Dotnet_V4_org/nuget/v3/index.json" />
      </packageSources>
      <activePackageSource>
        <add key="All" value="(Aggregate source)" />
      </activePackageSource>
      <packageSourceCredentials>
          <SDK_Dotnet_V4_org>
              <add key="Username" value="v-brucehaley@microsoft.com" />
              <add key="ClearTextPassword" value="%SDK_Dotnet_V4_org_PAT%" />
          </SDK_Dotnet_V4_org>
      </packageSourceCredentials>
    </configuration>

    "@;

    New-Item -Path $file -ItemType "file" -Value $content -Force;
    '-------------'; get-content "$file"; '===================';
  displayName: Create nuget.config for SDK_Dotnet_V4_org feed